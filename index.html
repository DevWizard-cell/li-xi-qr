<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>L√¨ X√¨ 2027</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{
    font-family:-apple-system,BlinkMacSystemFont,sans-serif;
    background:radial-gradient(circle at top,#ff2a2a,#8b0000);
    min-height:100vh;
    overflow:hidden;
    color:white;
}

/* ===== GRID 9 L√å X√å ===== */
.grid{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:12px;
    padding:20px;
    max-width:500px;
    margin:auto;
}

.lixi{
    width:100%;
    border-radius:15px;
    cursor:pointer;
    animation:float 1.5s infinite alternate ease-in-out;
    transition:transform 0.3s;
}

.lixi:hover{
    transform:scale(1.08);
}

@keyframes float{
    from{transform:translateY(0px);}
    to{transform:translateY(-8px);}
}

/* ===== MODAL OPEN ===== */
.overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    backdrop-filter:blur(5px);
    display:flex;
    justify-content:center;
    align-items:center;
    visibility:hidden;
    opacity:0;
    transition:0.4s;
}

.overlay.show{
    visibility:visible;
    opacity:1;
}

.envelope{
    width:75vw;
    max-width:280px;
    position:relative;
    perspective:1000px;
}

.front{
    width:100%;
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,0.5);
}

.flap{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    transform-origin:top;
    transition:1s;
    border-radius:18px;
}

.open .flap{
    transform:rotateX(-170deg);
}

.letter{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,100%);
    width:85%;
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(10px);
    border-radius:20px;
    padding:20px;
    text-align:center;
    opacity:0;
    transition:1s;
}

.show-letter{
    transform:translate(-50%,-50%);
    opacity:1;
}

canvas{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
}
</style>
</head>
<body>

<h3 style="text-align:center;margin-top:20px;">üßß Ch·ªçn m·ªôt l√¨ x√¨ b·∫°n th√≠ch</h3>

<div class="grid" id="grid"></div>

<div class="overlay" id="overlay">
    <div class="envelope" id="envelope">
        <img id="frontImg" class="front">
        <img id="flapImg" class="flap">
        <div id="letter" class="letter"></div>
    </div>
</div>

<canvas id="firework"></canvas>
<audio id="sound" src="sound/bell ring.mp3"></audio>

<script>

// ===== CH·ªêNG NH·∫¨N L·∫†I =====
if(localStorage.getItem("lixiChoice")){
    document.body.innerHTML="<h2 style='text-align:center;margin-top:40px;'>B·∫°n ƒë√£ nh·∫≠n l√¨ x√¨ r·ªìi üéâ</h2>";
}

// ===== DANH S√ÅCH ·∫¢NH =====
const images=[
"images/Phong Bao L√¨ X√¨ ·∫¢nh 1 ƒê·ªè Nay.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 2 Cam H·ªìng Nay Nay.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 3 Xanh Bi·ªÉn ƒê·∫≠m.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 4 ƒê·ªè X∆∞a.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 5 V√†ng X∆∞a.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 6 Lam X∆∞a.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 7 T·∫øt R·ªôn R√†ng.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 8 Gen Z.png",
    "images/Phong Bao L√¨ X√¨ ·∫¢nh 9 Th∆∞ Ph√°p.png"
];

// ===== L·ªúI CH√öC (TH√äM ·ªû ƒê√ÇY) =====
const wishes=[
"2027 b·∫°n s·∫Ω b·ª©t ph√° gi·ªõi h·∫°n!",
"Ti·ªÅn v√¥ √†o √†o!",
"Thi ƒë√¢u ƒë·∫≠u ƒë√≥!",
"May m·∫Øn su·ªët nƒÉm!",
"Y√™u th∆∞∆°ng tr·ªçn v·∫πn!",
"Th√†nh c√¥ng r·ª±c r·ª°!",
"C∆° h·ªôi l·ªõn ƒëang ch·ªù b·∫°n!",
"B·∫°n s·∫Ω l√†m n√™n ƒëi·ªÅu phi th∆∞·ªùng!",
"M·ªçi ƒëi·ªÅu t·ªët ƒë·∫πp s·∫Ω ƒë·∫øn!"
];

// ===== T·∫†O GRID =====
const grid=document.getElementById("grid");

images.forEach(src=>{
    const img=document.createElement("img");
    img.src=src;
    img.className="lixi";
    img.onclick=()=>openEnvelope(src);
    grid.appendChild(img);
});

// ===== M·ªû =====
function openEnvelope(src){
    document.getElementById("overlay").classList.add("show");
    document.getElementById("frontImg").src=src;
    document.getElementById("flapImg").src=src;

    setTimeout(()=>{
        document.getElementById("envelope").classList.add("open");
        document.getElementById("sound").play();

        const wish=wishes[Math.floor(Math.random()*wishes.length)];
        const letter=document.getElementById("letter");
        letter.innerHTML=wish;
        letter.classList.add("show-letter");

        rainMoney();
        fireworks();

        localStorage.setItem("lixiChoice","done");
    },400);
}

// ===== MONEY =====
function rainMoney(){
    for(let i=0;i<40;i++){
        let m=document.createElement("div");
        m.innerHTML="üí∞";
        m.style.position="fixed";
        m.style.left=Math.random()*100+"vw";
        m.style.top="-20px";
        m.style.fontSize="22px";
        m.style.animation="fall "+(Math.random()*2+3)+"s linear forwards";
        document.body.appendChild(m);
        setTimeout(()=>m.remove(),5000);
    }
}

const style=document.createElement("style");
style.innerHTML="@keyframes fall{to{transform:translateY(110vh) rotate(720deg);opacity:0;}}";
document.head.appendChild(style);

// ===== FIREWORK =====
const canvas=document.getElementById("firework");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

function fireworks(){
    let particles=[];
    for(let i=0;i<80;i++){
        particles.push({
            x:canvas.width/2,
            y:canvas.height/2,
            angle:Math.random()*Math.PI*2,
            speed:Math.random()*4+2
        });
    }

    let frame=0;
    function animate(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p=>{
            p.x+=Math.cos(p.angle)*p.speed;
            p.y+=Math.sin(p.angle)*p.speed;
            ctx.fillStyle="hsl("+Math.random()*360+",100%,60%)";
            ctx.beginPath();
            ctx.arc(p.x,p.y,2,0,Math.PI*2);
            ctx.fill();
        });
        frame++;
        if(frame<40) requestAnimationFrame(animate);
    }
    animate();
}

</script>

</body>
</html>
